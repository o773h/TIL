# 알고리즘
#### 2230 수 고르기
* #### 문제풀이:https://o773h.tistory.com/42
#### 16472 고냥이
* #### 문제풀이:https://o773h.tistory.com/43

# HTTP
### API URI 고민
* #### 회원을 등록하고 수정하고 조회하는게 리소스가 아니다.
* #### **회원이라는 개념 자체가 리소스이다.**
* #### **회원이라는 리소스만 식별하면 된다 -> 회원 리소스를 URI에 매핑**

* #### 회원 목록 조회 /members
* #### 회원 조회 /members{id}
* #### 회원 등록 /members{id}
* #### 회원 수정 /members{id}
* #### 회원 삭제 /members{id}
* #### 계층 구조상 상위를 컬렉션으로 보고 복수 단어 사용 권장

#### 조회, 등록, 수정, 삭제를 어떻게 분리?

* #### 가장 중요한 것은 리소스를 식별하는 것
* #### URI는 리소스만 식별
* #### 해당 리소스를 대상으로 하는 행위와 리소스를 분리
* #### 리소스는 명사, 행위는 동사

### HTTP 메서드 종류
* #### GET : 리소스 조회
* #### POST : 요청 데이터 처리, 주로 등록에 사용
* #### PUT : 리소스를 대체, 해당 리소스가 없으면 생성
* #### PATCH : 리소스 부분 변경
* #### DELETE : 리소스 삭제

### GET
* #### 리소스 조회
* #### 서버에 전달하고 싶은 데이터는 query(쿼리 파라미터, 쿼리 스트링)를 통해서 전달
* #### 메시지 바디를 사용해서 데이터를 전달할 수 있지만, 지원하지 않는 곳이 많아서 권장하지 않음

### POST
* #### 요청 데이터 처리
* #### 메시지 바디를 통해 서버로 요청 데이터 전달
* #### 서버는 요청 데이터를 처리 (메시지 바디를 통해 들어온 데이터 처리)
* #### 주로 전달된 데이터로 신규 리소스 등록, 프로세스 처리에 사용
* #### POST 요청이 오면 요청 데이터를 어떻게 처리할지 리소스마다 따로 정해야 함(정해진 것이 없음)

### PUT
* #### 리소스가 있으면대체
* #### 리소스가 없으면 생성
* #### 클라이언트가 리소스를 식별
* #### (클라이언트가 리소스 위치를 알고 URI지정)
* #### POST와의 차이점

### HTTP 메서드의 속성
* #### 안전 : 호출해도 리소스를 변경하지 않는다. (GET)
* #### 멱등 : 한 번 호출하든 100번 호출하든 결과가 똑같다. (GET,PUT,DELETE)
* #### 캐시가능 : 응답 결과 리소스를 캐시해서 사용 (GET,HEAD,POST,PATCH)
* #### POST, PATCH는 본문 내용까지 캐시 키로 고려해야 하는데 구현이 쉽지 않아서 GET,HEAD정도만 캐시로 사용

### HTTP 메서드 활용
* #### 클라이언트에서 서버로 데이터 전송
* #### HTTP API 설계

### 클라이언트에서 서버로 데이터 전송
#### <데이터 전달 방식>
#### 쿼리 파라미터를 통한 데이터 전송
* #### GET
* #### 주로 정렬 필터(검색어)
#### 메시지 바디를 통한 데이터 전송
* #### POST, PUT, PATCH
* #### 회원 가입, 상품 주문, 리소스 등록, 리소스 변경

#### <4가지 상황>
* #### 정적 데이터 조회
* #### 동적 데이터 조회
* #### HTML Form을 통한 데이터 전송
* #### HTTP API를 통한 데이터 전송

### 정적 데이터 조회
* #### 이미지, 정적 텍스트 문서
* #### 조회는 GET 사용
* #### 일반적으로 쿼리 파라미터 없이 리소스 경로로 단순하게 조회 가능

### 동적 데이터 조회
* #### 주로 검색, 게시판 목록에서 정렬 필터(검색어)
* #### 조회 조건을 줄여주는 필터, 조회 결과를 정렬하는 정렬 조건에 주로 사용
* #### 조회는 GET 사용
* #### GET은 쿼리 파라미터를 사용해서 데이터를 전달

### HTML Form 데이터 전송
* #### HTML From submit시 POST전송
* #### Content-Type: application/x-www-form-urlencoded 사용
  * #### form의 내용을 메시지 바디를 통해서 전송(key=value, 쿼리 파라미터 형식)
  * #### 전송 데이터를 url encoding 처리 (abc김 -> abc%EA%B9%80)
* #### Content-Type: multipart/form-data
  * #### 파일 업로드 같은 바이너리 데이터 전송시 사용
  * #### 다른 종류의 여러 파일과 폼의 내용 함께 전송 가능
* #### HTML Form 전송은 GET, POST만 지원

### HTTP API 데이터 전송
* #### 서버 to 서버(백엔드 시스템 통신)
* #### 앱 클라이언트(아이폰, 안드로이드)
* #### 웹 클라이언트
  * #### HTML에서 Form 전송 대신 자바 스크립트를 통한 통신에 사용(AJAX)
  * #### (React, VueJs같은 웹 클라이언트와 API 통신)
* #### POST, PUT, PATCH: 메시지 바디를 통해 데이터 전송
* #### GET: 조회, 쿼리 파라미터로 데이터 전달
* #### Content-Type: aplication/json을 주로 사용(사실상 표준)

### HTTP API 설계 예시
* #### HTTP API - 컬렉션
  * #### POST 기반 등록
  * #### 회원 관리 API 제공
* #### HTTP API - 스토어
  * #### PUT 기반 등록
  * #### 정적 컨텐츠 관리, 원격 파일 관리
* #### HTML FORM 사용
  * #### 웹 페이지 회원 관리
  * #### GET, POST만 지원

### POST 기반 등록
* #### 클라이언트는 등록될 리소스의 URI를 모른다
  * #### 회원 등록 /members -> POST
  * #### POST /members
* #### 서버가 새로 등록될 리소스 URI를 생성해준다.
  * #### HTTP/1.1 201 Created
  * #### Location: /members/100
* #### 컬렉션
  * #### 서버가 관리하는 리소스 디렉토리
  * #### 서버가 리소스의 URI를 생성하고 관리
  * #### 여기서 컬렉션은 /members

### PUT 기반 등록
* #### 클라이언트가 리소스 URI를 알고 있어야 한다.
  * #### 파일 등록 /files/{filename} -> PUT
  * #### PUT /files/star.jpg
* #### 클라이언트가 직접 리소스의 URI를 지정한다.
* #### 스토어
  * #### 클라이언트가 관리하는 리소스 저장소
  * #### 클라이언트가 리소스의 URI를 알고 관리
  * #### 여기서 스토어는 /files

### HTML FORM 사용
* #### HTML FORM은 GET, POST만 지원
* #### 컨트롤 URI
  * #### GET, POST만 지원하므로 제약이 있음
  * #### 이런 제약을 해결하기 위해 동사로 된 리소스 경로 사용
  * #### POST의 /new, /edit, /delete가 컨트롤 URI
  * #### HTTP 메서드로 해결하기 애매한 경우 사용(HTTP API 포함)
```
• 회원 목록 /members -> GET
• 회원 등록 폼 /members/new -> GET
• 회원 등록 /members/new, /members -> POST
• 회원 조회 /members/{id} -> GET
• 회원 수정 폼 /members/{id}/edit -> GET
• 회원 수정 /members/{id}/edit, /members/{id} -> POST
• 회원 삭제 /members/{id}/delete -> POST
```

### HTTP 상태코드
* #### 1XX(Informational) : 요청이 수신되어 처리중
* #### 2XX(Successful) : 요청 정상 처리
* #### 3XX(Redirection) : 요청을 완료하려면 추가 행동이 필요
* #### 4XX(Client Error) : 클라이언트 오류, 잘못된 문법등으로 서버가 요청을 수행할 수 없음
* #### 5XX(Server Error) : 서버 오류, 서버가 정상 요청을 처리하지 못함

### 1XX
* #### 요청이 수신되어 처리중 (거의 사용X)

### 2XX
* #### 200 OK
* #### 201 Created
  * #### 요청 성공해서 새로운 리소스가 생성됨
  * ####  생성된 리소스는 응답의 Location 헤더 필드로 식별
* #### 202 Accepted
  * #### 요청이 접수되었으나 처리가 완료되지 않았음 
  * #### 배치 처리 같은 곳에 사용
  * #### 예)요청 접수 1시간 뒤에 배치 프로세스가 요청을 처리
* #### 204 No Content
  * #### 요청을 성공적으로 수행했지만, 응답 페이로드 본문에 보낼 데이터가 없음
  * #### 예) 웹 문서 편집기에 sava 버튼

### 3XX
* #### 웹 브라우저는 3XX 응답 결과에 Location 헤더가 있으면, Location 위치로 자동 이동(리다이렉트)
* #### 영구 리다이렉션 - 특정 리소스의 URI가 영구적으로 이동
* #### 일시 리다이렉션 - 일시적인 변경(PRG : Post/Redirect/Get)
* #### 특수 리다이렉션 - 결과 대신 캐시를 사용

### 영구 리다이렉션 301,308
* #### 리소스의 URI가 영구적으로 이동
* #### 원래의 URL을 사용X, 검색 엔진 등에서도 변경 인지
* #### 301 Moved Permanently
  * #### 리다이렉트시 요청 메서드가 GET으로 변하고 본문이 제거될 수 있음
* #### 308 Permanent Redirect
  * #### 리다이렉트시 요청 메서드와 본문 유지

### 일시적인 리다이렉션 302,307,303
* #### 리소스의 URI가 일시적으로 변경
* #### 따라서 검색 엔진 등에서 URL을 변경하면 안됨
* #### 302 Found
  * #### 리다이렉트시 요청 메서드가 GET으로 변하고 본문이 제거될 수 있음
* #### 307 Temporary Redirect
  * #### 리다이렉트시 요청 메서드와 본문 유지
* #### 303 See Other
  * #### 리다이렉트시 요청 메서드가 GET으로 변경
### PRG
* #### POST로 주문후에 주문 결과 화면을 GET 메서드로 리다이렉트
* #### 새로고침해도 결과 화면을 GET으로 조회

### 기타 리다이렉션 300 304
* #### 300 Multiple Choices : 안씀
* #### 304 Not Modified
  * #### 캐시를 목적으로 사용
  * #### 클라이언트에게 리소스가 수정되지 않았음을 알려준다. 따라서 클라이언트는 로컬PC에 저장된 캐시를 재사용한다. (캐시로 리다이렉트한다)
  * #### 응답에 메시지 바디를 포함하면 안된다. (로컬 캐시를 사용해야 하므로)
  * #### 조건부 GET, HEAD 요청시 사용

### 4XX
* #### 오류의 원인이 클라이언트에 있음
* #### 400 Bad Request
  * #### 클라이언트가 잘못된 요청을 해서 서버가 요청을 처리할 수 없음
  * #### 요청 구문, 메시지 등등 오류
  * #### 클라이언트는 요청 내용을 다시 검토하고 보내야 함
* #### 401 Unautorized
  * #### 클라이언트가 해당 리소스에 대한 인증(Authentication)이 필요함
  * #### 오류 발생시 응답에 WWW-Authenticate 헤더와 함게 인증 방법을 설명
  * #### 인증 : 본인이 누구인지 확인(로그인)
  * #### 인가(Authorizaion) : 권한부여
  * #### 이름이 아쉬움
* #### 403 Forbidden
  * #### 서버가 요청을 이해했지만 승인을 거부함
  * #### 인증 자격 증명은 있지만, 접근 권한이 불충분한 경우
* #### 404 Not Found
  * #### 요청 리소스를 찾을 수 없음
  * #### 요청 리소스가 서버에 없음
  * #### 또는 클라이언트가 권한이 부족한 리소스에 접근할 때 해당 리소스를 숨기고 싶을 때

### 5XX
* #### 서버 문제로 오류 발생(재시도 하면 성공할 수도 있음 - 복구가 되거나 등등)
* #### 500 Internal Server Error
  * #### 서버 문제로 오류 발생, 애매하면 500 오류
* #### 503 Service Unavailable
  * #### 서버가 일시적인 과부하 또는 예정된 작업으로 잠시 요청을 처리할 수 없음
  * #### Retry-After 헤더 필드로 얼마뒤에 복구되는지 보낼수도 있음
